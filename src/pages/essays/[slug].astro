---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const essays = await getCollection("essays");
  return essays.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<BaseLayout title={entry.data.title}>
  <header>
    {entry.data.draft && <div class="draft-label">DRAFT</div>}
    <p class="date">{entry.data.date.toLocaleDateString("en-US", { year: "numeric", month: "long", day: "numeric", timeZone: "UTC" })}</p>
  </header>

  <div class="content">
    <Content />
  </div>

  <div class="back-link">
    <a href="/">&larr; Back to Lab Notes</a>
  </div>

  <style>
    .content {
      font-size: 1.1rem;
      margin: 2rem 0;
      line-height: 1.8;
    }
    .back-link {
      margin-top: 3rem;
      border-top: 1px solid #333;
      padding-top: 1rem;
    }
    .draft-label {
      background-color: #ffcccc;
      color: #cc0000;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      font-weight: bold;
      text-align: center;
      margin-bottom: 1rem;
      font-size: 1.5rem;
      letter-spacing: 0.1em;
      border: 2px solid #cc0000;
    }
  </style>
</BaseLayout>
