---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const essays = await getCollection("essays");
const sortedEssays = essays.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title="Lab Notes">
  <p>Welcome to my blog about my home molecular virology lab. Below are my long-form essays. See also <a href="/posts/">posts</a> and <a href="/about/">about</a>.</p>

  {
    sortedEssays.map((essay) => (
      <article>
        <h2>
          <a href={`/essays/${essay.slug}`}>{essay.data.title}</a>
        </h2>
        <p class="date">
          {essay.data.date.toLocaleDateString("en-US", {
            year: "numeric",
            month: "long",
            day: "numeric",
          })}
        </p>
        {essay.data.description && <p>{essay.data.description}</p>}
      </article>
    ))
  }
</BaseLayout>
